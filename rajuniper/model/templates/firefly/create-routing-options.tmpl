{#
    Inputs:
        static_routes: static routes to be created
#}

<rpc>
    <edit-config>
        <target>
            <candidate/>
        </target>
        <config>
            <configuration>
                <routing-options>
                {% if data.get('static_routes') is defined %}
                    <static operation="replace">
                        {% for route in data['static_routes'] %}
                        <route>
                            <name>{{ route['destination'] }}</name>
                            <next-hop>{{ route['next_hop'] }}</next-hop>
                        </route>
                        {% endfor %}
                    </static>
                {% endif %}
                {% if data.get('bgpRouting') is defined %}
                    {% if 'router_id' in data['bgpRouting'] %}
                        <router-id operation="replace">{{ data['bgpRouting']['router_id'] }}</router-id>
                    {% endif %}
                    {% if 'router_as' in data['bgpRouting'] %}
                        <autonomous-system operation="replace">
                            <as-number>{{ data['bgpRouting']['router_as'] }}</as-number>
                        </autonomous-system>
                    {% endif %}
                    {% if 'confederation' in data['bgpRouting'] %}
                        {% set confederation = data['bgpRouting']['confederation'] %}
                        <confederation operation="replace">
                            <confederation-as>{{ confederation['as_number'] }}</confederation-as>
                            {% for member in confederation['members'] %}
                                <members>{{ member }}</members>
                            {% endfor %}
                        </confederation>
                    {% endif %}
                {% endif %}
                </routing-options>
            </configuration>
        </config>
    </edit-config>
</rpc>
