{
    "endpoint": "null",
    "type": "bpprov.runners.simple.Sequence",
    "tests": [
        "commands/tests/show-interfaces.json"
    ],
    "endpoint-parameters": {
    },
    "out-schema": "firefly/out-delete-interface-complete.json",
    "out-path": [
    ],
    "in-path": [{
        "type": "bpprov.translators.aggregator.Call",
        "parameters": {
            "command": "delete-interface.json",
            "input": {
                "templateType": "json-dict",
                "data": {
                    "interface": "{{ data.name }}"
                }
            },
            "output": {
                "patches": [{
                    "from": "/data",
                    "to": "/data/interface-results"
                }]
            }
        }
    }, {
        "type": "bpprov.translators.aggregator.Call",
        "parameters": {
            "command": "delete-security-zone.json",
            "input": {
                "templateType": "json-dict",
                "data": {
                    "interface": "{{ data.name }}",
                    "security-zone": "{{ data['security-zone'] if 'security-zone' in data else 'untrust' }}"
                }
            },
            "output": {
                "patches": [{
                    "from": "/data",
                    "to": "/data/security-zone-results"
                }]
            }
        }
    }, {
        "type": "bpprov.translators.route.Branch",
        "parameters": {
            "choice": [{
                "when": "${interface-results} contains \"rpc-error\"",
                "do": {
                    "type": "bpprov.translators.aggregator.Call",
                    "parameters": {
                        "command": "discard-changes.json",
                        "output": {
                            "patches": [{
                                "from": "/data",
                                "to": "/data/discard-results"
                            }]
                        }
                    }
                }
            }, {
                "when": "${security-zone-results} contains \"rpc-error\"",
                "do": {
                    "type": "bpprov.translators.aggregator.Call",
                    "parameters": {
                        "command": "discard-changes.json",
                        "output": {
                            "patches": [{
                                "from": "/data",
                                "to": "/data/discard-results"
                            }]
                        }
                    }
                }
            }],
            "otherwise": {
                "type": "bpprov.translators.aggregator.Call",
                "parameters": {
                    "command": "commit.json",
                    "input": {
                        "templateType": "json-dict",
                        "data": {}
                    },
                    "output": {
                        "patches": [{
                            "from": "/data",
                            "to": "/data/commit-results"
                        }]
                    },
                    "error": {
                        "type": "log"
                    }
                }
            }
        }
    }, {
        "type": "bpprov.translators.route.Branch",
        "parameters": {
            "choice": [{
                "when": "${.} contains \"commit-results\"",
                "do": {
                    "type": "bpprov.translators.route.Branch",
                    "parameters": {
                        "choice": [{
                            "when": "${commit-results} contains \"rpc-error\"",
                            "do": {
                                "type": "bpprov.translators.branch.RunnerCommand",
                                "parameters": {
                                    "command": "discard-changes.json",
                                    "preserveData": true
                                }
                            }
                        }]
                    }
                }
            }]
        }
    }, {
        "type": "bpprov.translators.route.Branch",
        "parameters": {
            "choice": [{
                "when": "${.} contains \"commit-results\"",
                "do": {
                    "type": "bpprov.translators.route.Branch",
                    "parameters": {
                        "choice": [{
                            "when": "${commit-results} contains \"rpc-error\"",
                            "do": {
                                "type": "bpprov.translators.dict.ReMap",
                                "parameters": {
                                    "mapping": {
                                        "rpc-error.commit": "commit-results"
                                    },
                                    "overwrite": true
                                }
                            }
                        }]
                    }
                }
            }]
        }
    }, {
        "type": "bpprov.translators.route.Branch",
        "parameters": {
            "choice": [{
                "when": "${interface-results} contains \"rpc-error\"",
                "do": {
                    "type": "bpprov.translators.dict.ReMap",
                    "parameters": {
                        "mapping": {
                            "rpc-error.create-interface": "interface-results"
                        },
                        "overwrite": true
                    }
                }
            }]
        }
    }, {
        "type": "bpprov.translators.route.Branch",
        "parameters": {
            "choice": [{
                "when": "${security-zone-results} contains \"rpc-error\"",
                "do": {
                    "type": "bpprov.translators.dict.ReMap",
                    "parameters": {
                        "mapping": {
                            "rpc-error.create-security-zone": "security-zone-results"
                        },
                        "overwrite": true
                    }
                }
            }]
        }
    }]
}
